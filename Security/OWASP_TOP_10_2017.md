# 어플리케이션 보안 위험
## OWASP TOP 10 (2017)
### A1: 인젝션
SQL, NoSQL, XPath, XML 등 

- 파라미터 내에 쿼리문을 삽입하여 의도치 않은 데이터를 공격자가 조회
```sql
select * from users where email = '' or '1=1' -- and password = ... <- 주석처리로 뒤에 패스워드 조건문은 날릴 수 있음
```
- 고의적으로 에러를 발생 시켜, 에러메세지에서 테이블 구조를 유추

#### 대안
디비 에러 메세지 노출 금지


### A2: 취약한 인증 및 세션 관리
- 로그인할때 세션 값이 변경되지 않거나, 세션 타임아웃이 설정되어 있지 않을 경우 등 무차별 대입 공격 가능
- 인증 절차 미흡
ㄴ 파라미터 조작으로 다음 step으로 넘어가거나 비밀번호를 변경할 수 있음.

#### 대응 방안
- 다중 인증 구현. 
- 패스워드 생성 규칙 적용. 
- 지속적인 로그인 시도 제한.
- 에러메세지를 통한 유추 방지.
- 안전한 세션 관리.

### A3: 민감 정보 노출
- 민감한 데이터가 평문으로 통신되는 경우
- 민감 데이터가 쿠키에 저장되어있을 경우<br/>
ㄴ 쿠키에 저장된 토큰 값을 디코딩 했을 경우에도 노출될 수 있다.<br/>
https://jwt.io<br/>
https://md5online.org/

#### 대응 방안
- 중요 데이터를 포함하는 응답 캐시 비활성화
- 안전한 암호 알고리즘 적용<br/>
  ㄴ 대칭 키 알고리즘: 128 bit<br/>
  ㄴ MD5같은 취약한 해시 함수는 사용 지양. SHA256 이상 적용 권장.


### A4: XML 외부 참조(XXE 인젝션)
잘못 구성된 XML Parser에 의해 외부에서 삽입된 XML 공격 코드가 실행.

### A5: 취약한 접근 통제
- 시스템 파일 다운로드 
```
[Request]
https://test.aria.com/api/download/attachment/url=../../etc/password
```
- 쿠키값을 통한 인증 및 권한 확인
- 접근 제어
  ㄴ 파라미터 변조: 타 사용자의 데이터 조회 가능한지

### A6: 잘못된 보안 구성

### A7: XSS(Cross-site scripting)
의도되지 않은 스크립트가 삽입되어 클라이언트를 공격할 수 있을 때.<br/>
```
https://test.search.com/query=<script>alert(document.cookie)</script>
```
#### 공격에 활용이 어떻게 되길래?
스크립트구문이 들어간 링크가 공유 되었을때 악의적인 사이트로 유도, 쿠키 혹은 사용자의 중요 정보값을 탈취할 수 있음.

### A8: 안전하지 않은 역직렬화
#### 대응 방안
- deserialization시 허용된 유형의 데이터 형식만 처리되도록 검증 수행
- 예외/ 실패시 로그 반드시 기록

### A9: 알려진 취약점이 있는 구성요소 사용

### A10: 불충분한 로깅 & 모니터링


<hr/>
## 참고 링크
- [OWASP TOP10 (2017)](https://www.owasp.org/images/b/bd/OWASP_Top_10-2017-ko.pdf)
